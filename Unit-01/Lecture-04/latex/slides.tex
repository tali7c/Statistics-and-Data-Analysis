\documentclass{beamer}

\usetheme{Berlin}
\usecolortheme{Orchid}
\useoutertheme{miniframes}
\setbeamertemplate{navigation symbols}{}

\usepackage{amsmath}
\usepackage{booktabs}
\usepackage{graphicx}
\graphicspath{{../images/}}

\title[Statistics and Data Analysis]{Statistics and Data Analysis}
\subtitle{Unit 01 -- Lecture 04: In-class Activity (Cleaning + Summary + Plots)}
\author{Tofik Ali}
\institute{School of Computer Science, UPES Dehradun}
\date{\today}

\begin{document}

\begin{frame}
  \titlepage
  \vspace{-0.5em}
  \begin{center}
    \small \texttt{https://github.com/tali7c/Statistics-and-Data-Analysis}
  \end{center}
\end{frame}

\begin{frame}{Quick Links}
  \centering
  \hyperlink{sec:task}{\beamerbutton{Task}}\hspace{0.6em}
  \hyperlink{sec:deliver}{\beamerbutton{Deliverables}}\hspace{0.6em}
  \hyperlink{sec:demo}{\beamerbutton{Solution}}\hspace{0.6em}
  \hyperlink{sec:summary}{\beamerbutton{Wrap-up}}
\end{frame}

\begin{frame}{Agenda}
  \tableofcontents
\end{frame}

\section{Activity Brief}
\label{sec:task}

\begin{frame}{What We Will Do Today}
  You will complete a small end-to-end preprocessing + EDA task:
  \begin{itemize}[<+->]
    \item load a raw dataset
    \item clean errors (missing, invalid, outliers)
    \item create 2--3 engineered features
    \item create summary tables
    \item create 3 plots and write short insights
  \end{itemize}
\end{frame}

\begin{frame}{Time Plan (55 minutes)}
  \begin{itemize}[<+->]
    \item 10 min: attendance + setup
    \item 25 min: activity work (in pairs)
    \item 10 min: discussion (compare approaches)
    \item 5 min: wrap-up + exit question
  \end{itemize}
\end{frame}

\begin{frame}{Dataset}
  \small
  File: \texttt{data/campus\_cafe\_transactions.csv}
  \vspace{0.4em}

  Columns:
  \begin{itemize}
    \item \texttt{date} (datetime), \texttt{category} (Snacks/Drinks/Stationery)
    \item \texttt{payment\_mode} (Cash/UPI/Card)
    \item \texttt{units}, \texttt{unit\_price}, \texttt{discount\_pct}
  \end{itemize}

  \vspace{0.4em}
  \normalsize
  \textbf{Note:} It intentionally includes missing values and invalid entries to clean.
\end{frame}

\section{Deliverables}
\label{sec:deliver}

\begin{frame}{Task 1: Load and Inspect (5 minutes)}
  \begin{itemize}[<+->]
    \item Print shape and first 5 rows
    \item Check dtypes (are \texttt{units} numeric? is \texttt{date} datetime?)
    \item Compute missingness \% per column
  \end{itemize}
\end{frame}

\begin{frame}{Task 2: Cleaning Rules (10 minutes)}
  \begin{itemize}[<+->]
    \item Convert \texttt{date} to datetime, numeric columns to numeric
    \item Handle missing \texttt{discount\_pct} (e.g., fill with 0)
    \item Handle missing \texttt{units} (drop or impute; justify)
    \item Handle invalid \texttt{units} (negative) \textbf{drop the row}
    \item Handle discount outliers (cap to a reasonable range)
    \item Handle price outliers (replace with category median or cap; justify)
  \end{itemize}
\end{frame}

\begin{frame}{Task 3: Feature Engineering (5 minutes)}
  Create:
  \begin{itemize}[<+->]
    \item \texttt{gross\_amount} = \texttt{units} $\times$ \texttt{unit\_price}
    \item \texttt{net\_amount} = \texttt{gross\_amount} $\times (1-\texttt{discount\_pct}/100)$
    \item \texttt{is\_weekend} from \texttt{date}
  \end{itemize}
\end{frame}

\begin{frame}{Task 4: Summary Tables (10 minutes)}
  Produce:
  \begin{itemize}[<+->]
    \item total net revenue by \texttt{category}
    \item total net revenue by \texttt{payment\_mode}
    \item top 5 transactions by \texttt{net\_amount}
  \end{itemize}
\end{frame}

\begin{frame}{Task 5: Plots (10 minutes)}
  Create and save:
  \begin{itemize}[<+->]
    \item bar chart: net revenue by category
    \item histogram: net amount per transaction
    \item line chart: daily net revenue
  \end{itemize}
\end{frame}

\begin{frame}{Final Deliverables (Submit/Show)}
  \begin{itemize}[<+->]
    \item Cleaned dataset saved as \texttt{data/campus\_cafe\_clean.csv}
    \item Three plots saved in \texttt{images/}
    \item 3--5 short insights + 2 limitations/caveats
  \end{itemize}
\end{frame}

\section{Solution and Discussion}
\label{sec:demo}

\begin{frame}{Solution Script (Python)}
  After attempting yourself, run:
  \begin{center}
    \texttt{python demo/activity\_solution.py}
  \end{center}
  Outputs:
  \begin{itemize}
    \item \texttt{data/campus\_cafe\_clean.csv}
    \item summary CSVs in \texttt{data/}
    \item plots in \texttt{images/}
  \end{itemize}
\end{frame}

\begin{frame}{Expected Key Results (Example)}
  \small
  Net revenue by category (after cleaning):
  \begin{center}
    \begin{tabular}{lrr}
      \toprule
      Category & Count & Net Revenue (INR) \\
      \midrule
      Snacks & 9 & 1129.25 \\
      Drinks & 8 & 368.00 \\
      Stationery & 7 & 283.90 \\
      \bottomrule
    \end{tabular}
  \end{center}
  \vspace{0.2em}
  \normalsize
  \textbf{Question:} Why is Snacks revenue much higher?
\end{frame}

\begin{frame}{Expected Key Results (Payment Mode)}
  \small
  Net revenue by payment mode (after cleaning):
  \begin{center}
    \begin{tabular}{lrr}
      \toprule
      Mode & Count & Net Revenue (INR) \\
      \midrule
      UPI & 12 & 1124.15 \\
      Cash & 6 & 304.00 \\
      Card & 6 & 353.00 \\
      \bottomrule
    \end{tabular}
  \end{center}
\end{frame}

\begin{frame}{Example Plots}
  \begin{columns}[T]
    \begin{column}{0.49\textwidth}
      \textbf{Revenue by Category}
      \begin{center}
      \IfFileExists{../images/revenue_by_category.png}{
        \includegraphics[width=\linewidth]{revenue_by_category.png}
      }{
        \small (Run solution to generate \texttt{revenue\_by\_category.png})
      }
      \end{center}
    \end{column}
    \begin{column}{0.49\textwidth}
      \textbf{Daily Revenue}
      \begin{center}
      \IfFileExists{../images/daily_revenue.png}{
        \includegraphics[width=\linewidth]{daily_revenue.png}
      }{
        \small (Run solution to generate \texttt{daily\_revenue.png})
      }
      \end{center}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}{Write Insights + Caveats}
  Examples of insights:
  \begin{itemize}[<+->]
    \item Snacks contribute the largest share of revenue in this sample week.
    \item UPI is the most common payment mode and also highest revenue.
    \item A few large transactions dominate total revenue (check top-5 table).
  \end{itemize}
  \vspace{0.4em}
  Examples of caveats:
  \begin{itemize}[<+->]
    \item Small dataset (only a few days) $\Rightarrow$ not representative.
    \item Cleaning choices (caps/median replacement) can change results.
  \end{itemize}
\end{frame}

\section{Wrap-up}
\label{sec:summary}

\begin{frame}{Wrap-up}
  \begin{itemize}[<+->]
    \item A good summary combines: cleaning + engineered features + tables + plots
    \item Document your rules so results are reproducible
    \item Always communicate limitations honestly
  \end{itemize}
  \vspace{0.6em}
  \textbf{Exit question:} What is one cleaning rule you applied and why?
\end{frame}

\end{document}
